# events

**Path**: `C:\Users\Alexa\ai-trading-firm\core\events.py`

## Overview

Event Definitions
=================

All events in the system are immutable and traceable.
Each event carries metadata for audit compliance (EU/AMF).

## Classes

### EventType

**Inherits from**: Enum

Enumeration of all event types in the system.

### SignalDirection

**Inherits from**: Enum

Trading signal direction.

### OrderSide

**Inherits from**: Enum

Order side.

### OrderType

**Inherits from**: Enum

Order type.

### TimeInForce

**Inherits from**: Enum

Time in force instruction for orders (#E7).

Specifies how long an order remains active.

### RiskAlertSeverity

**Inherits from**: Enum

Risk alert severity levels.

### Event

Base event class.

All events are immutable (frozen) to ensure audit trail integrity.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert event to dictionary for audit logging.

### MarketDataEvent

**Inherits from**: Event

Market data tick event from Interactive Brokers.

#### Methods

##### `def mid(self) -> float`

Calculate mid price.

##### `def spread(self) -> float`

Calculate bid-ask spread.

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### SignalEvent

**Inherits from**: Event

Trading signal generated by a strategy agent.

Signals are advisory only - they do NOT trigger orders directly.
Only the CIO agent can make trading decisions.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary with full traceability.

### DecisionEvent

**Inherits from**: Event

Trading decision made by the CIO agent.

This is the ONLY event that can lead to order creation.
Must include full rationale and data sources for compliance.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary with full compliance data.

### ValidatedDecisionEvent

**Inherits from**: Event

Decision validated by Risk & Compliance agent.

Only validated decisions can be executed.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### OrderEvent

**Inherits from**: Event

Order event sent to broker.

Only the Execution Agent can create these.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### FillEvent

**Inherits from**: Event

Order fill event from broker.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### RiskAlertEvent

**Inherits from**: Event

Risk alert event.

CRITICAL and EMERGENCY alerts will halt trading.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### RollSignalEvent

**Inherits from**: Event

Futures roll signal event.

Generated when a futures contract approaches expiry and needs to be rolled.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### RollCompleteEvent

**Inherits from**: Event

Futures roll completion event.

Generated when a roll has been successfully completed.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### SurveillanceAlertEvent

**Inherits from**: Event

Market surveillance alert event.

Generated when potential market abuse is detected.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### TransactionReportEvent

**Inherits from**: Event

Transaction reporting event.

Generated when a transaction report is submitted to regulators.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### StressTestResultEvent

**Inherits from**: Event

Stress test result event.

Generated when a stress test scenario is run.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### CorrelationAlertEvent

**Inherits from**: Event

Correlation regime alert event.

Generated when correlation patterns change significantly.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### GreeksUpdateEvent

**Inherits from**: Event

Portfolio Greeks update event.

Generated when portfolio Greeks are recalculated.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### KillSwitchEvent

**Inherits from**: Event

Kill switch event for MiFID II RTS 6 compliance.

Triggers immediate halt of all trading activity when activated.
All pending orders should be cancelled and no new orders accepted.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

### OrderState

**Inherits from**: Enum

Order state machine states per MiFID II requirements.

### OrderStateChangeEvent

**Inherits from**: Event

Order state change event for tracking order lifecycle.

Provides full audit trail of order state transitions.

#### Methods

##### `def to_audit_dict(self) -> dict[str, Any]`

Convert to audit dictionary.

## Functions

### `def is_valid_state_transition(from_state: OrderState, to_state: OrderState) -> bool`

Check if a state transition is valid.
